<!DOCTYPE html>
<html>
<head>
    <title>í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì‚­ì œ</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: monospace; padding: 20px; }
        button { margin: 10px; padding: 10px; background: #ef4444; color: white; border: none; cursor: pointer; }
        .result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .warning { background-color: #fef2f2; border-color: #fecaca; color: #dc2626; }
        .success { background-color: #efe; }
        .info { background-color: #eef; }
    </style>
</head>
<body>
    <h1>í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì‚­ì œ ë„êµ¬</h1>
    
    <div class="warning">
        <h3>âš ï¸ ê²½ê³ </h3>
        <p>ì´ ë„êµ¬ëŠ” Supabase í”„ë¡œì íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸ ê³„ì •ì„ ì™„ì „íˆ ì‚­ì œí•©ë‹ˆë‹¤.</p>
        <p>ì‚­ì œí•  ì´ë©”ì¼: <strong>landolf@me.com</strong></p>
        <p>ì‚­ì œëœ ê³„ì •ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
    </div>
    
    <button onclick="deleteTestUser()">landolf@me.com ê³„ì • ì‚­ì œ</button>
    <button onclick="checkUserExists()">ê³„ì • ì¡´ì¬ ì—¬ë¶€ í™•ì¸</button>
    
    <div id="result"></div>

    <script type="module">
        // Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm'
        
        // í™˜ê²½ë³€ìˆ˜ëŠ” ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´í•´ì•¼ í•¨ (ë³´ì•ˆìƒ ì—¬ê¸°ì„œëŠ” placeholder)
        const supabaseUrl = 'YOUR_SUPABASE_URL'
        const supabaseServiceKey = 'YOUR_SERVICE_ROLE_KEY'  // ì„œë¹„ìŠ¤ ë¡¤ í‚¤ í•„ìš”
        
        const supabase = createClient(supabaseUrl, supabaseServiceKey)
        
        window.checkUserExists = async function() {
            try {
                const { data: { users }, error } = await supabase.auth.admin.listUsers()
                
                if (error) {
                    document.getElementById('result').innerHTML = 
                        `<div class="warning">ì˜¤ë¥˜: ${error.message}</div>`
                    return
                }
                
                const landolfUser = users.find(user => user.email === 'landolf@me.com')
                
                if (landolfUser) {
                    document.getElementById('result').innerHTML = 
                        `<div class="info">
                            <h4>ê³„ì • ë°œê²¬:</h4>
                            <p>ID: ${landolfUser.id}</p>
                            <p>Email: ${landolfUser.email}</p>
                            <p>Created: ${landolfUser.created_at}</p>
                            <p>Email Verified: ${landolfUser.email_confirmed_at ? 'Yes' : 'No'}</p>
                        </div>`
                } else {
                    document.getElementById('result').innerHTML = 
                        `<div class="success">landolf@me.com ê³„ì •ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>`
                }
                
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    `<div class="warning">ì˜¤ë¥˜: ${error.message}</div>`
            }
        }
        
        window.deleteTestUser = async function() {
            if (!confirm('ì •ë§ë¡œ landolf@me.com ê³„ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return
            }
            
            try {
                // 1. ë¨¼ì € ì‚¬ìš©ì ì°¾ê¸°
                const { data: { users }, error: listError } = await supabase.auth.admin.listUsers()
                
                if (listError) {
                    document.getElementById('result').innerHTML = 
                        `<div class="warning">ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì˜¤ë¥˜: ${listError.message}</div>`
                    return
                }
                
                const landolfUser = users.find(user => user.email === 'landolf@me.com')
                
                if (!landolfUser) {
                    document.getElementById('result').innerHTML = 
                        `<div class="info">landolf@me.com ê³„ì •ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>`
                    return
                }
                
                // 2. ì‚¬ìš©ì ì‚­ì œ
                const { error: deleteError } = await supabase.auth.admin.deleteUser(landolfUser.id)
                
                if (deleteError) {
                    document.getElementById('result').innerHTML = 
                        `<div class="warning">ì‚­ì œ ì˜¤ë¥˜: ${deleteError.message}</div>`
                    return
                }
                
                document.getElementById('result').innerHTML = 
                    `<div class="success">
                        <h4>âœ… ê³„ì • ì‚­ì œ ì™„ë£Œ</h4>
                        <p>landolf@me.com (ID: ${landolfUser.id}) ê³„ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                        <p>ì´ì œ ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì •ë¦¬í•˜ê³  ë‹¤ì‹œ ë¡œê·¸ì¸í•´ë³´ì„¸ìš”.</p>
                    </div>`
                
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    `<div class="warning">ì˜¤ë¥˜: ${error.message}</div>`
            }
        }
    </script>
    
    <div class="info">
        <h3>ğŸ’¡ ì‚¬ìš© ë°©ë²•</h3>
        <ol>
            <li>Supabase í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ ì„œë¹„ìŠ¤ ë¡¤ í‚¤ë¥¼ ë³µì‚¬</li>
            <li>ì´ íŒŒì¼ì˜ JavaScriptì—ì„œ URLê³¼ í‚¤ë¥¼ ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´</li>
            <li>"ê³„ì • ì¡´ì¬ ì—¬ë¶€ í™•ì¸" ë²„íŠ¼ìœ¼ë¡œ ê³„ì • í™•ì¸</li>
            <li>"ê³„ì • ì‚­ì œ" ë²„íŠ¼ìœ¼ë¡œ ì™„ì „ ì‚­ì œ</li>
        </ol>
        
        <h3>ğŸ”§ ëŒ€ì•ˆ ë°©ë²• (Supabase ëŒ€ì‹œë³´ë“œ)</h3>
        <ol>
            <li>Supabase ëŒ€ì‹œë³´ë“œ â†’ Authentication â†’ Users</li>
            <li>landolf@me.com ê³„ì • ì°¾ê¸°</li>
            <li>ì‚­ì œ ë²„íŠ¼ í´ë¦­</li>
        </ol>
    </div>
</body>
</html>